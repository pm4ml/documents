<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="600px" preserveAspectRatio="none" style="width:839px;height:600px;" version="1.1" viewBox="0 0 839 600" width="839px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jeqz9q0j1c2b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="125" x2="125" y1="54.1875" y2="543.0625"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="443.5" x2="443.5" y1="54.1875" y2="543.0625"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="730" x2="730" y1="54.1875" y2="543.0625"/><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="12" y="36.9141">DFSP Core Backend</text><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="5" y="542.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="12" y="573.9766">DFSP Core Backend</text><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="210" x="336.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="196" x="343.5" y="36.9141">Payment Manager</text><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="210" x="336.5" y="542.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="196" x="343.5" y="573.9766">Payment Manager</text><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="634" y="5"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="641" y="36.9141">Mojaloop Switch</text><rect fill="#F8F8F8" filter="url(#f1jeqz9q0j1c2b)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="634" y="542.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="641" y="573.9766">Mojaloop Switch</text><rect fill="#EEEEEE" filter="url(#f1jeqz9q0j1c2b)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="832" x="0" y="92.2813"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="832" y1="92.2813" y2="92.2813"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="832" y1="95.2813" y2="95.2813"/><rect fill="#EEEEEE" filter="url(#f1jeqz9q0j1c2b)" height="38.1875" style="stroke:#000000;stroke-width:2.0;" width="161" x="335.5" y="74.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="140" x="341.5" y="103.1016">send money</text><polygon fill="#383838" points="431.5,154.5625,441.5,158.5625,431.5,162.5625,435.5,158.5625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="125.5" x2="437.5" y1="158.5625" y2="158.5625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="132.5" y="151.2891">1</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="277" x="149.5" y="151.2891">POST /sendmoney (sync)</text><polygon fill="#383838" points="718.5,198.75,728.5,202.75,718.5,206.75,722.5,202.75" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="443.5" x2="724.5" y1="202.75" y2="202.75"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="450.5" y="195.4766">2</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="467.5" y="195.4766">GET /parties/{type}/{id}</text><polygon fill="#383838" points="454.5,242.9375,444.5,246.9375,454.5,250.9375,450.5,246.9375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="448.5" x2="729.5" y1="246.9375" y2="246.9375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="460.5" y="239.6641">3</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="244" x="477.5" y="239.6641">PUT /parties/{type}/{id}</text><polygon fill="#383838" points="718.5,287.125,728.5,291.125,718.5,295.125,722.5,291.125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="443.5" x2="724.5" y1="291.125" y2="291.125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="450.5" y="283.8516">4</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="152" x="467.5" y="283.8516">POST /quotes</text><polygon fill="#383838" points="454.5,331.3125,444.5,335.3125,454.5,339.3125,450.5,335.3125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="448.5" x2="729.5" y1="335.3125" y2="335.3125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="460.5" y="328.0391">5</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="176" x="477.5" y="328.0391">PUT /quotes/{id}</text><line style="stroke:#383838;stroke-width:1.0;" x1="443.5" x2="485.5" y1="379.5" y2="379.5"/><line style="stroke:#383838;stroke-width:1.0;" x1="485.5" x2="485.5" y1="379.5" y2="392.5"/><line style="stroke:#383838;stroke-width:1.0;" x1="444.5" x2="485.5" y1="392.5" y2="392.5"/><polygon fill="#383838" points="454.5,388.5,444.5,392.5,454.5,396.5,450.5,392.5" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="450.5" y="372.2266">6</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="191" x="467.5" y="372.2266">check quote rules</text><polygon fill="#383838" points="718.5,432.6875,728.5,436.6875,718.5,440.6875,722.5,436.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="443.5" x2="724.5" y1="436.6875" y2="436.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="450.5" y="429.4141">7</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="173" x="467.5" y="429.4141">POST /transfers</text><polygon fill="#383838" points="454.5,476.875,444.5,480.875,454.5,484.875,450.5,480.875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="448.5" x2="729.5" y1="480.875" y2="480.875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="460.5" y="473.6016">8</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="197" x="477.5" y="473.6016">PUT /transfers/{id}</text><polygon fill="#383838" points="136.5,521.0625,126.5,525.0625,136.5,529.0625,132.5,525.0625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="130.5" x2="442.5" y1="525.0625" y2="525.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="142.5" y="517.7891">9</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="159.5" y="517.7891">HTTP 200 result (sync)</text><!--MD5=[77426c89b975e2c7f4e21c2beeebc6fb]
@startuml

autonumber
skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 24
skinparam defaultFontSize 24
skinparam noteFontSize 24
skinparam monochrome true

participant "DFSP Core Backend" as backend

participant "Payment Manager" as sob

participant "Mojaloop Switch" as sw


== send money ==

    backend -> sob: POST /sendmoney (sync)
    
    sob -> sw: GET /parties/{type}/{id}
    sw -> sob: PUT /parties/{type}/{id}
    sob -> sw: POST /quotes
    sw -> sob: PUT /quotes/{id}
    sob -> sob: check quote rules
    sob -> sw: POST /transfers
    sw -> sob: PUT /transfers/{id}
    
    sob -> backend: HTTP 200 result (sync)

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1250
Language: en
Country: US
--></g></svg>