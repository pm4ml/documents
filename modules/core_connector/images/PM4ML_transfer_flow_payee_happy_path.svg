<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1916px" preserveAspectRatio="none" style="width:1792px;height:1916px;" version="1.1" viewBox="0 0 1792 1916" width="1792px" zoomAndPan="magnify"><defs><filter height="300%" id="focyyet8isusv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="1904.25" style="stroke:#383838;stroke-width:1.0;" width="665" x="343" y="6"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="205" x="573" y="30.9141">Payment Manager</text><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="101" x2="101" y1="89.375" y2="1858.0625"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="463" x2="463" y1="89.375" y2="1858.0625"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="910" x2="910" y1="89.375" y2="1858.0625"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1357" x2="1357" y1="89.375" y2="1858.0625"/><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="5" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="12" y="72.1016">Mojaloop Switch</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="5" y="1857.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="12" y="1888.9766">Mojaloop Switch</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="229" x="347" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="215" x="354" y="72.1016">Mojaloop Connector</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="229" x="347" y="1857.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="215" x="354" y="1888.9766">Mojaloop Connector</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="183" x="817" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="169" x="824" y="72.1016">Core Connector</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="183" x="817" y="1857.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="169" x="824" y="1888.9766">Core Connector</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="1237" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="1244" y="72.1016">DFSP Core Backend</text><rect fill="#F8F8F8" filter="url(#focyyet8isusv)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="1237" y="1857.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="1244" y="1888.9766">DFSP Core Backend</text><rect fill="#EEEEEE" filter="url(#focyyet8isusv)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1785.5" x="0" y="127.4688"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1785.5" y1="127.4688" y2="127.4688"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1785.5" y1="130.4688" y2="130.4688"/><rect fill="#EEEEEE" filter="url(#focyyet8isusv)" height="38.1875" style="stroke:#000000;stroke-width:2.0;" width="186" x="799.75" y="109.375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="165" x="805.75" y="138.2891">receive money</text><polygon fill="#383838" points="451.5,189.75,461.5,193.75,451.5,197.75,455.5,193.75" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="193.75" y2="193.75"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="108.5" y="186.4766">1</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="125.5" y="186.4766">GET /parties/{type}/{id}</text><polygon fill="#383838" points="898.5,233.9375,908.5,237.9375,898.5,241.9375,902.5,237.9375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="904.5" y1="237.9375" y2="237.9375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="470.5" y="230.6641">2</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="406" x="487.5" y="230.6641">GET /parties/{idType}/{idValue} (sync)</text><polygon fill="#383838" points="1345.5,278.125,1355.5,282.125,1345.5,286.125,1349.5,282.125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="910.5" x2="1351.5" y1="282.125" y2="282.125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="917.5" y="274.8516">3</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="406" x="934.5" y="274.8516">GET /parties/{idType}/{idValue} (sync)</text><polygon fill="#383838" points="921.5,352.5,911.5,356.5,921.5,360.5,917.5,356.5" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="915.5" x2="1356.5" y1="356.5" y2="356.5"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="927.5" y="334.1328">4</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="193" x="944.5" y="319.0391">Return Payee info</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="951.5" y="349.2266">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,426.875,464.5,430.875,474.5,434.875,470.5,430.875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="909.5" y1="430.875" y2="430.875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="480.5" y="408.5078">5</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="193" x="497.5" y="393.4141">Return Payee info</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="504.5" y="423.6016">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,471.0625,102.5,475.0625,112.5,479.0625,108.5,475.0625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="475.0625" y2="475.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="118.5" y="467.7891">6</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="244" x="135.5" y="467.7891">PUT /parties/{type}/{id}</text><polygon fill="#383838" points="451.5,515.25,461.5,519.25,451.5,523.25,455.5,519.25" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="519.25" y2="519.25"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="108.5" y="511.9766">7</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="152" x="125.5" y="511.9766">POST /quotes</text><polygon fill="#383838" points="898.5,559.4375,908.5,563.4375,898.5,567.4375,902.5,563.4375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="904.5" y1="563.4375" y2="563.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="470.5" y="556.1641">8</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="306" x="487.5" y="556.1641">POST /quoterequests (sync)</text><polygon fill="#383838" points="1345.5,603.625,1355.5,607.625,1345.5,611.625,1349.5,607.625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="910.5" x2="1351.5" y1="607.625" y2="607.625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="917.5" y="600.3516">9</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="306" x="934.5" y="600.3516">POST /quoterequests (sync)</text><polygon fill="#383838" points="921.5,678,911.5,682,921.5,686,917.5,682" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="915.5" x2="1356.5" y1="682" y2="682"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="927.5" y="659.6328">10</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="141" x="957.5" y="644.5391">Return quote</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="964.5" y="674.7266">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,752.375,464.5,756.375,474.5,760.375,470.5,756.375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="909.5" y1="756.375" y2="756.375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="480.5" y="734.0078">11</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="141" x="510.5" y="718.9141">Return quote</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="517.5" y="749.1016">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,796.5625,102.5,800.5625,112.5,804.5625,108.5,800.5625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="800.5625" y2="800.5625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="118.5" y="793.2891">12</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="176" x="148.5" y="793.2891">PUT /quotes/{id}</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="844.75" y2="844.75"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="844.75" y2="857.75"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="857.75" y2="857.75"/><polygon fill="#383838" points="112.5,853.75,102.5,857.75,112.5,861.75,108.5,857.75" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="837.4766">13</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="318" x="138.5" y="837.4766">Perform (NDC) liquidity check</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="901.9375" y2="901.9375"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="901.9375" y2="914.9375"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="914.9375" y2="914.9375"/><polygon fill="#383838" points="112.5,910.9375,102.5,914.9375,112.5,918.9375,108.5,914.9375" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="894.6641">14</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155" x="138.5" y="894.6641">Reserve funds</text><polygon fill="#383838" points="451.5,955.125,461.5,959.125,451.5,963.125,455.5,959.125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="959.125" y2="959.125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="951.8516">15</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="173" x="138.5" y="951.8516">POST /transfers</text><polygon fill="#383838" points="898.5,999.3125,908.5,1003.3125,898.5,1007.3125,902.5,1003.3125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="904.5" y1="1003.3125" y2="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="470.5" y="996.0391">16</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="500.5" y="996.0391">POST /transfers (sync)</text><polygon fill="#383838" points="1345.5,1073.6875,1355.5,1077.6875,1345.5,1081.6875,1349.5,1077.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="910.5" x2="1351.5" y1="1077.6875" y2="1077.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="917.5" y="1055.3203">17</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="947.5" y="1040.2266">Process transfer</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="954.5" y="1070.4141">POST /transfers (sync)</text><line style="stroke:#383838;stroke-width:1.0;" x1="1357.5" x2="1399.5" y1="1121.875" y2="1121.875"/><line style="stroke:#383838;stroke-width:1.0;" x1="1399.5" x2="1399.5" y1="1121.875" y2="1134.875"/><line style="stroke:#383838;stroke-width:1.0;" x1="1358.5" x2="1399.5" y1="1134.875" y2="1134.875"/><polygon fill="#383838" points="1368.5,1130.875,1358.5,1134.875,1368.5,1138.875,1364.5,1134.875" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1364.5" y="1114.6016">18</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="254" x="1394.5" y="1114.6016">Perform internal checks</text><line style="stroke:#383838;stroke-width:1.0;" x1="1357.5" x2="1399.5" y1="1179.0625" y2="1179.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1399.5" x2="1399.5" y1="1179.0625" y2="1192.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1358.5" x2="1399.5" y1="1192.0625" y2="1192.0625"/><polygon fill="#383838" points="1368.5,1188.0625,1358.5,1192.0625,1368.5,1196.0625,1364.5,1192.0625" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1364.5" y="1171.7891">19</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155" x="1394.5" y="1171.7891">Reserve funds</text><polygon fill="#383838" points="921.5,1262.4375,911.5,1266.4375,921.5,1270.4375,917.5,1266.4375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="915.5" x2="1356.5" y1="1266.4375" y2="1266.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="927.5" y="1244.0703">20</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="210" x="957.5" y="1228.9766">Transfer successful</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="964.5" y="1259.1641">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,1336.8125,464.5,1340.8125,474.5,1344.8125,470.5,1340.8125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="909.5" y1="1340.8125" y2="1340.8125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="480.5" y="1318.4453">21</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="210" x="510.5" y="1303.3516">Transfer successful</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="517.5" y="1333.5391">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,1411.1875,102.5,1415.1875,112.5,1419.1875,108.5,1415.1875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="1415.1875" y2="1415.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="118.5" y="1392.8203">22</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="197" x="148.5" y="1377.7266">PUT /transfers/{id}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="282" x="155.5" y="1407.9141">transferState=RESERVED</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="1459.375" y2="1459.375"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="1459.375" y2="1472.375"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="1472.375" y2="1472.375"/><polygon fill="#383838" points="112.5,1468.375,102.5,1472.375,112.5,1476.375,108.5,1472.375" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1452.1016">23</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="193" x="138.5" y="1452.1016">Perform validation</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="1516.5625" y2="1516.5625"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="1516.5625" y2="1529.5625"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="1529.5625" y2="1529.5625"/><polygon fill="#383838" points="112.5,1525.5625,102.5,1529.5625,112.5,1533.5625,108.5,1529.5625" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1509.2891">24</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="150" x="138.5" y="1509.2891">Commit funds</text><polygon fill="#383838" points="451.5,1599.9375,461.5,1603.9375,451.5,1607.9375,455.5,1603.9375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="1603.9375" y2="1603.9375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1581.5703">25</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="229" x="138.5" y="1566.4766">PATCH /transfers/{id}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="145.5" y="1596.6641">transferState=COMMITTED</text><polygon fill="#383838" points="898.5,1674.3125,908.5,1678.3125,898.5,1682.3125,902.5,1678.3125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="904.5" y1="1678.3125" y2="1678.3125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="470.5" y="1655.9453">26</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="280" x="500.5" y="1640.8516">PUT /transfers/{transferId}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="507.5" y="1671.0391">transferState=COMMITTED</text><polygon fill="#383838" points="1345.5,1748.6875,1355.5,1752.6875,1345.5,1756.6875,1349.5,1752.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="910.5" x2="1351.5" y1="1752.6875" y2="1752.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="917.5" y="1730.3203">27</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="280" x="947.5" y="1715.2266">PUT /transfers/{transferId}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="954.5" y="1745.4141">transferState=COMMITTED</text><line style="stroke:#383838;stroke-width:1.0;" x1="1357.5" x2="1399.5" y1="1827.0625" y2="1827.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1399.5" x2="1399.5" y1="1827.0625" y2="1840.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1358.5" x2="1399.5" y1="1840.0625" y2="1840.0625"/><polygon fill="#383838" points="1368.5,1836.0625,1358.5,1840.0625,1368.5,1844.0625,1364.5,1840.0625" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1364.5" y="1804.6953">28</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="334" x="1394.5" y="1789.6016">Move funds to Payee's account</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="377" x="1401.5" y="1819.7891">managed internally in Payee DFSP</text><!--MD5=[69914b95eb0d9395d774410898af9c1b]
@startuml
autonumber
skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 24
skinparam defaultFontSize 24
skinparam noteFontSize 24
skinparam monochrome true

participant "Mojaloop Switch" as sw

box Payment Manager
participant "Mojaloop Connector" as sib
participant "Core Connector" as cc
end box
  
participant "DFSP Core Backend" as backend


== receive money ==

    sw -> sib: GET /parties/{type}/{id}
    sib -> cc: GET /parties/{idType}/{idValue} (sync)
    cc -> backend: GET /parties/{idType}/{idValue} (sync)
    backend -> cc: Return Payee info \n HTTP 200 result (sync)
    cc -> sib: Return Payee info \n HTTP 200 result (sync)
    sib -> sw: PUT /parties/{type}/{id}
    sw -> sib: POST /quotes
    sib -> cc: POST /quoterequests (sync)
    cc -> backend: POST /quoterequests (sync)
    backend -> cc: Return quote \n HTTP 200 result (sync)
    cc -> sib: Return quote \n HTTP 200 result (sync)
    sib -> sw: PUT /quotes/{id}
    sw -> sw: Perform (NDC) liquidity check
    sw -> sw: Reserve funds
    sw -> sib: POST /transfers
    sib -> cc: POST /transfers (sync)
    cc -> backend: Process transfer \n POST /transfers (sync)
    backend -> backend: Perform internal checks
    backend -> backend: Reserve funds
    backend -> cc: Transfer successful \n HTTP 200 result (sync)
    cc -> sib: Transfer successful \n HTTP 200 result (sync)
    sib -> sw: PUT /transfers/{id} \n transferState=RESERVED
    sw -> sw: Perform validation
    sw -> sw: Commit funds
    sw -> sib: PATCH /transfers/{id} \n transferState=COMMITTED
    sib -> cc: PUT /transfers/{transferId} \n transferState=COMMITTED
    cc -> backend: PUT /transfers/{transferId} \n transferState=COMMITTED
    backend -> backend: Move funds to Payee's account \n managed internally in Payee DFSP

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1250
Language: en
Country: US
--></g></svg>