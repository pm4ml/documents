<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1976px" preserveAspectRatio="none" style="width:1775px;height:1976px;" version="1.1" viewBox="0 0 1775 1976" width="1775px" zoomAndPan="magnify"><defs><filter height="300%" id="fxj6tg2mf1xx8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="1964.625" style="stroke:#383838;stroke-width:1.0;" width="741" x="343" y="6"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="205" x="611" y="30.9141">Payment Manager</text><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="101" x2="101" y1="89.375" y2="1918.4375"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="463" x2="463" y1="89.375" y2="1918.4375"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="986" x2="986" y1="89.375" y2="1918.4375"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1340" x2="1340" y1="89.375" y2="1918.4375"/><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="5" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="12" y="72.1016">Mojaloop Switch</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="189" x="5" y="1917.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="12" y="1949.3516">Mojaloop Switch</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="229" x="347" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="215" x="354" y="72.1016">Mojaloop Connector</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="229" x="347" y="1917.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="215" x="354" y="1949.3516">Mojaloop Connector</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="183" x="893" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="169" x="900" y="72.1016">Core Connector</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="183" x="893" y="1917.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="169" x="900" y="1949.3516">Core Connector</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="1220" y="40.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="1227" y="72.1016">DFSP Core Backend</text><rect fill="#F8F8F8" filter="url(#fxj6tg2mf1xx8)" height="44.1875" style="stroke:#383838;stroke-width:1.5;" width="237" x="1220" y="1917.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="223" x="1227" y="1949.3516">DFSP Core Backend</text><rect fill="#EEEEEE" filter="url(#fxj6tg2mf1xx8)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1768.5" x="0" y="127.4688"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1768.5" y1="127.4688" y2="127.4688"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1768.5" y1="130.4688" y2="130.4688"/><rect fill="#EEEEEE" filter="url(#fxj6tg2mf1xx8)" height="38.1875" style="stroke:#000000;stroke-width:2.0;" width="186" x="791.25" y="109.375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="165" x="797.25" y="138.2891">receive money</text><polygon fill="#383838" points="451.5,189.75,461.5,193.75,451.5,197.75,455.5,193.75" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="193.75" y2="193.75"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="108.5" y="186.4766">1</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="125.5" y="186.4766">GET /parties/{type}/{id}</text><polygon fill="#383838" points="974.5,233.9375,984.5,237.9375,974.5,241.9375,978.5,237.9375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="980.5" y1="237.9375" y2="237.9375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="470.5" y="230.6641">2</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="406" x="487.5" y="230.6641">GET /parties/{idType}/{idValue} (sync)</text><polygon fill="#383838" points="1328.5,278.125,1338.5,282.125,1328.5,286.125,1332.5,282.125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="986.5" x2="1334.5" y1="282.125" y2="282.125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="993.5" y="274.8516">3</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="233" x="1010.5" y="274.8516">Look up Payee (sync)</text><polygon fill="#383838" points="997.5,352.5,987.5,356.5,997.5,360.5,993.5,356.5" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="991.5" x2="1339.5" y1="356.5" y2="356.5"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="1003.5" y="334.1328">4</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="193" x="1020.5" y="319.0391">Return Payee info</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="1027.5" y="349.2266">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,457.0625,464.5,461.0625,474.5,465.0625,470.5,461.0625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="985.5" y1="461.0625" y2="461.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="480.5" y="423.6016">5</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="475" x="497.5" y="393.4141">Response to GET /parties/{idType}/{idValue}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="226" x="504.5" y="423.6016">(contains Payee info)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="504.5" y="453.7891">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,501.25,102.5,505.25,112.5,509.25,108.5,505.25" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="505.25" y2="505.25"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="118.5" y="497.9766">6</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="244" x="135.5" y="497.9766">PUT /parties/{type}/{id}</text><polygon fill="#383838" points="451.5,545.4375,461.5,549.4375,451.5,553.4375,455.5,549.4375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="549.4375" y2="549.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="108.5" y="542.1641">7</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="152" x="125.5" y="542.1641">POST /quotes</text><polygon fill="#383838" points="974.5,589.625,984.5,593.625,974.5,597.625,978.5,593.625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="980.5" y1="593.625" y2="593.625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="470.5" y="586.3516">8</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="306" x="487.5" y="586.3516">POST /quoterequests (sync)</text><polygon fill="#383838" points="1328.5,633.8125,1338.5,637.8125,1328.5,641.8125,1332.5,637.8125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="986.5" x2="1334.5" y1="637.8125" y2="637.8125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="13" x="993.5" y="630.5391">9</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="254" x="1010.5" y="630.5391">Prompt for quote (sync)</text><polygon fill="#383838" points="997.5,708.1875,987.5,712.1875,997.5,716.1875,993.5,712.1875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="991.5" x2="1339.5" y1="712.1875" y2="712.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1003.5" y="689.8203">10</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="141" x="1033.5" y="674.7266">Return quote</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="1040.5" y="704.9141">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,812.75,464.5,816.75,474.5,820.75,470.5,816.75" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="985.5" y1="816.75" y2="816.75"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="480.5" y="779.2891">11</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="375" x="510.5" y="749.1016">Response to POST /quoterequests</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="174" x="517.5" y="779.2891">(contains quote)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="517.5" y="809.4766">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,856.9375,102.5,860.9375,112.5,864.9375,108.5,860.9375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="860.9375" y2="860.9375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="118.5" y="853.6641">12</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="176" x="148.5" y="853.6641">PUT /quotes/{id}</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="905.125" y2="905.125"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="905.125" y2="918.125"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="918.125" y2="918.125"/><polygon fill="#383838" points="112.5,914.125,102.5,918.125,112.5,922.125,108.5,918.125" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="897.8516">13</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="318" x="138.5" y="897.8516">Perform (NDC) liquidity check</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="962.3125" y2="962.3125"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="962.3125" y2="975.3125"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="975.3125" y2="975.3125"/><polygon fill="#383838" points="112.5,971.3125,102.5,975.3125,112.5,979.3125,108.5,975.3125" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="955.0391">14</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155" x="138.5" y="955.0391">Reserve funds</text><polygon fill="#383838" points="451.5,1015.5,461.5,1019.5,451.5,1023.5,455.5,1019.5" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="1019.5" y2="1019.5"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1012.2266">15</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="173" x="138.5" y="1012.2266">POST /transfers</text><polygon fill="#383838" points="974.5,1059.6875,984.5,1063.6875,974.5,1067.6875,978.5,1063.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="980.5" y1="1063.6875" y2="1063.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="470.5" y="1056.4141">16</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="246" x="500.5" y="1056.4141">POST /transfers (sync)</text><polygon fill="#383838" points="1328.5,1103.875,1338.5,1107.875,1328.5,1111.875,1332.5,1107.875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="986.5" x2="1334.5" y1="1107.875" y2="1107.875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="993.5" y="1100.6016">17</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="1023.5" y="1100.6016">Process transfer</text><line style="stroke:#383838;stroke-width:1.0;" x1="1340.5" x2="1382.5" y1="1152.0625" y2="1152.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1382.5" x2="1382.5" y1="1152.0625" y2="1165.0625"/><line style="stroke:#383838;stroke-width:1.0;" x1="1341.5" x2="1382.5" y1="1165.0625" y2="1165.0625"/><polygon fill="#383838" points="1351.5,1161.0625,1341.5,1165.0625,1351.5,1169.0625,1347.5,1165.0625" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1347.5" y="1144.7891">18</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="254" x="1377.5" y="1144.7891">Perform internal checks</text><line style="stroke:#383838;stroke-width:1.0;" x1="1340.5" x2="1382.5" y1="1209.25" y2="1209.25"/><line style="stroke:#383838;stroke-width:1.0;" x1="1382.5" x2="1382.5" y1="1209.25" y2="1222.25"/><line style="stroke:#383838;stroke-width:1.0;" x1="1341.5" x2="1382.5" y1="1222.25" y2="1222.25"/><polygon fill="#383838" points="1351.5,1218.25,1341.5,1222.25,1351.5,1226.25,1347.5,1222.25" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1347.5" y="1201.9766">19</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155" x="1377.5" y="1201.9766">Reserve funds</text><polygon fill="#383838" points="997.5,1292.625,987.5,1296.625,997.5,1300.625,993.5,1296.625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="991.5" x2="1339.5" y1="1296.625" y2="1296.625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1003.5" y="1274.2578">20</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="210" x="1033.5" y="1259.1641">Transfer successful</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="1040.5" y="1289.3516">HTTP 200 result (sync)</text><polygon fill="#383838" points="474.5,1397.1875,464.5,1401.1875,474.5,1405.1875,470.5,1401.1875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="468.5" x2="985.5" y1="1401.1875" y2="1401.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="480.5" y="1363.7266">21</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="315" x="510.5" y="1333.5391">Response to POST /transfers</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="210" x="517.5" y="1363.7266">Transfer successful</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="247" x="517.5" y="1393.9141">HTTP 200 result (sync)</text><polygon fill="#383838" points="112.5,1471.5625,102.5,1475.5625,112.5,1479.5625,108.5,1475.5625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="106.5" x2="462.5" y1="1475.5625" y2="1475.5625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="118.5" y="1453.1953">22</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="197" x="148.5" y="1438.1016">PUT /transfers/{id}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="282" x="155.5" y="1468.2891">transferState=RESERVED</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="1519.75" y2="1519.75"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="1519.75" y2="1532.75"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="1532.75" y2="1532.75"/><polygon fill="#383838" points="112.5,1528.75,102.5,1532.75,112.5,1536.75,108.5,1532.75" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1512.4766">23</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="193" x="138.5" y="1512.4766">Perform validation</text><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="143.5" y1="1576.9375" y2="1576.9375"/><line style="stroke:#383838;stroke-width:1.0;" x1="143.5" x2="143.5" y1="1576.9375" y2="1589.9375"/><line style="stroke:#383838;stroke-width:1.0;" x1="102.5" x2="143.5" y1="1589.9375" y2="1589.9375"/><polygon fill="#383838" points="112.5,1585.9375,102.5,1589.9375,112.5,1593.9375,108.5,1589.9375" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1569.6641">24</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="150" x="138.5" y="1569.6641">Commit funds</text><polygon fill="#383838" points="451.5,1660.3125,461.5,1664.3125,451.5,1668.3125,455.5,1664.3125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="101.5" x2="457.5" y1="1664.3125" y2="1664.3125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="108.5" y="1641.9453">25</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="229" x="138.5" y="1626.8516">PATCH /transfers/{id}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="145.5" y="1657.0391">transferState=COMMITTED</text><polygon fill="#383838" points="974.5,1734.6875,984.5,1738.6875,974.5,1742.6875,978.5,1738.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="463.5" x2="980.5" y1="1738.6875" y2="1738.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="470.5" y="1716.3203">26</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="280" x="500.5" y="1701.2266">PUT /transfers/{transferId}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="507.5" y="1731.4141">transferState=COMMITTED</text><polygon fill="#383838" points="1328.5,1809.0625,1338.5,1813.0625,1328.5,1817.0625,1332.5,1813.0625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="986.5" x2="1334.5" y1="1813.0625" y2="1813.0625"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="993.5" y="1790.6953">27</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="280" x="1023.5" y="1775.6016">PUT /transfers/{transferId}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="293" x="1030.5" y="1805.7891">transferState=COMMITTED</text><line style="stroke:#383838;stroke-width:1.0;" x1="1340.5" x2="1382.5" y1="1887.4375" y2="1887.4375"/><line style="stroke:#383838;stroke-width:1.0;" x1="1382.5" x2="1382.5" y1="1887.4375" y2="1900.4375"/><line style="stroke:#383838;stroke-width:1.0;" x1="1341.5" x2="1382.5" y1="1900.4375" y2="1900.4375"/><polygon fill="#383838" points="1351.5,1896.4375,1341.5,1900.4375,1351.5,1904.4375,1347.5,1900.4375" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1347.5" y="1865.0703">28</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="334" x="1377.5" y="1849.9766">Move funds to Payee's account</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="377" x="1384.5" y="1880.1641">managed internally in Payee DFSP</text><!--MD5=[fd3fb48d8915a087cc72908763aa6969]
@startuml
autonumber
skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 24
skinparam defaultFontSize 24
skinparam noteFontSize 24
skinparam monochrome true

participant "Mojaloop Switch" as sw

box Payment Manager
participant "Mojaloop Connector" as sib
participant "Core Connector" as cc
end box
  
participant "DFSP Core Backend" as backend


== receive money ==

    sw -> sib: GET /parties/{type}/{id}
    sib -> cc: GET /parties/{idType}/{idValue} (sync)
    cc -> backend: Look up Payee (sync)
    backend -> cc: Return Payee info \n HTTP 200 result (sync)
    cc -> sib: Response to GET /parties/{idType}/{idValue} \n (contains Payee info) \n HTTP 200 result (sync)
    sib -> sw: PUT /parties/{type}/{id}
    sw -> sib: POST /quotes
    sib -> cc: POST /quoterequests (sync)
    cc -> backend: Prompt for quote (sync)
    backend -> cc: Return quote \n HTTP 200 result (sync)
    cc -> sib: Response to POST /quoterequests \n (contains quote) \n HTTP 200 result (sync)
    sib -> sw: PUT /quotes/{id}
    sw -> sw: Perform (NDC) liquidity check
    sw -> sw: Reserve funds
    sw -> sib: POST /transfers
    sib -> cc: POST /transfers (sync)
    cc -> backend: Process transfer
    backend -> backend: Perform internal checks
    backend -> backend: Reserve funds
    backend -> cc: Transfer successful \n HTTP 200 result (sync)
    cc -> sib: Response to POST /transfers \n Transfer successful \n HTTP 200 result (sync)
    sib -> sw: PUT /transfers/{id} \n transferState=RESERVED
    sw -> sw: Perform validation
    sw -> sw: Commit funds
    sw -> sib: PATCH /transfers/{id} \n transferState=COMMITTED
    sib -> cc: PUT /transfers/{transferId} \n transferState=COMMITTED
    cc -> backend: PUT /transfers/{transferId} \n transferState=COMMITTED
    backend -> backend: Move funds to Payee's account \n managed internally in Payee DFSP

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1250
Language: en
Country: US
--></g></svg>